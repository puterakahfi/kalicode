!function(t){"use strict";function e(){n(),a()}function n(){for(var t=c(),e=0;e<m;++e){var n=v[e],a=t.indexOf(e);y!==e?(classie.add(n,"page--inactive"),a!==-1?(n.style.WebkitTransform="translate3d(0,100%,0)",n.style.transform="translate3d(0,100%,0)"):(n.style.WebkitTransform="translate3d(0,75%,-300px)",n.style.transform="translate3d(0,75%,-300px)")):classie.remove(n,"page--inactive"),n.style.zIndex=e<y?parseInt(y-e):parseInt(m+y-e),a!==-1?n.style.opacity=parseFloat(1-.1*a):n.style.opacity=0}}function a(){g.addEventListener("click",r),h.forEach(function(t){var e=t.getAttribute("href").slice(1);t.addEventListener("click",function(t){t.preventDefault(),o(e)})}),v.forEach(function(t){var e=t.getAttribute("id");t.addEventListener("click",function(t){b&&(t.preventDefault(),o(e))})}),document.addEventListener("keydown",function(t){if(b){var e=t.keyCode||t.which;27===e&&i()}})}function r(){b?i():(s(),b=!0)}function s(){classie.add(g,"menu-button--open"),classie.add(p,"pages-stack--open"),classie.add(k,"pages-nav--open");for(var t=c(),e=0,n=t.length;e<n;++e){var a=v[t[e]];a.style.WebkitTransform="translate3d(0, 75%, "+parseInt(-200-50*e)+"px)",a.style.transform="translate3d(0, 75%, "+parseInt(-200-50*e)+"px)"}}function i(){o()}function o(t){var e=t?document.getElementById(t):v[y],a=v.indexOf(e),r=c(a);e.style.WebkitTransform="translate3d(0, 0, 0)",e.style.transform="translate3d(0, 0, 0)",e.style.opacity=1;for(var s=0,i=r.length;s<i;++s){var o=v[r[s]];o.style.WebkitTransform="translate3d(0,100%,0)",o.style.transform="translate3d(0,100%,0)"}t&&(y=a),classie.remove(g,"menu-button--open"),classie.remove(k,"pages-nav--open"),f(e,function(){classie.remove(p,"pages-stack--open"),n(),b=!1})}function c(t){var e=y+1<m?y+1:0,n=y+2<m?y+2:1,a=[];return t!=y&&a.push(y),t!=e&&a.push(e),t!=n&&a.push(n),a}var l={transitions:Modernizr.csstransitions},d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},u=d[Modernizr.prefixed("transition")],f=function(t,e){var n=function(t){if(l.transitions){if(t.target!=this)return;this.removeEventListener(u,n)}e&&"function"==typeof e&&e.call(this)};l.transitions?t.addEventListener(u,n):n()},p=document.querySelector(".pages-stack"),v=[].slice.call(p.children),m=v.length,y=0,g=document.querySelector("button.menu-button"),k=document.querySelector(".pages-nav"),h=[].slice.call(k.querySelectorAll(".link--page")),b=!1;e()}(window);